<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>操作说明</title>
    <link rel="stylesheet" href="css/frame.css"/>
    <link rel="stylesheet" href="css/instruction.css"/>
</head>
<body>
<div class="container1">
    <div class="col-xs-12 col-md-12 col-lg-12 p0">
    <div class="menu col-xs-2 col-md-2 col-lg-2 ">
        <h3>操作说明</h3>
        <ul class="ulmenu1">
            <li id="instruction_nav1"><a class="selected" href="javascript:void(0)">如何订阅</a></li>
            <li id="instruction_nav2"><a href="javascript:void(0)">如何发布</a></li>
            <li id="instruction_nav3"><a href="javascript:void(0)">如何调用</a></li>
            <li id="instruction_nav4"><a href="javascript:void(0)">FAQ</a></li>
        </ul>
    </div>
    <div class="content_i col-xs-9 col-md-9 col-lg-9">
        <div class="menu1 menu_tab">
            <div id="instruction_tab1"  class="tab">
                <p class="tt">第一步：在左侧菜单中选择订阅APIs-》应用列表</p>
                <p><div align="center"><img src="images/order1.png"></div></p>

                <p class="tt">第二步：在应用列表中选择一行，点击后面快捷入口的"API列表"，进入该应用的API列表界面</p>
                <p><div align="center"><img src="images/order2.png"></div></p>

                <p class="tt">第三步：在API列表页面，①表示可订阅到自己应用的应用名称；②表示当前API订阅状态；③点击"API订阅"按钮即可订阅API。注：（②处待审批和已通过状态不能重复订阅）</p>
                <p><div align="center"><img src="images/order3.png"></div></p>
            </div>
            <div id="instruction_tab2" class="tab" style="display: none">
                <p class="tt">第一步：在左侧菜单中选择发布APIs-》我的API，点击①处的"发布API"按钮</p>
                <p><div align="center"><img src="images/publish1.png"></div></p>

                <p class="tt">第二步：发布API分两步，第一步分为基本信息和请求信息，所有带红<label style="color: red">*</label>的都是必填项。①选择一个当前用户已经创建的应用；②选择要发布的API所使用的请求方法；③选择发布API的Body协议；</p>
                <p><div align="center"><img src="images/publish2.png"></div></p>

                <p class="tt">第三步：发布API第二步分为目标API，目标地址及高级配置，所有带红<label style="color: red">*</label>的都是必填项。所有必填项填写完后点击"保存并关闭"按钮即可完成API发布</p>
                <p><div align="center"><img src="images/publish3.png"></div></p>


            </div>
            <div id="instruction_tab3" class="tab" style="display: none">
                <p class="tt">第一步：点击下载签名工具包SignXml.jar </p>
                <p>
        <a href="" id="signXml" style=" display: inline-block; text-align: center;float: left;margin-left: 20px"><img src="images/sign.png" style=" width: 50px; "><span style="display: block; text-align: center">signXml.jar</span></a>
       <a href="" id="sinatureDemo" style=" display: inline-block; text-align: center;margin-left: 50px"><img src="images/zip.png" style=" width: 50px; "><span style="display: block; text-align: center">签名生成代码示例下载</span></a>

                </p>

                <p class="tt">第二步：在系统找到签名需要的信息，appCode：应用身份编码、apiCode：API编码、privateKey：应用密钥</p>
                <p><div align="center"><img src="images/transfer1.jpg"></div></p>
                <p><div align="center"><img src="images/transfer2.jpg"></div></p>
                <p><div align="center"><img src="images/transfer3.jpg"></div></p>
                <p><div align="center"><img src="images/transfer4.jpg"></div></p>

                <p class="tt">第三步：使用签名工具进行签名</p>
                <p><div align="center"><img src="images/conserve.png"></div></p>

                <p class="tt">第四步：调用时将签名信息放入head。</p>
                <p><div align="center"><img src="images/qm.png"></div></p>
            </div>
            <div id="instruction_tab4" class="tab" style="display: none">
                <p class="tt">1、发布API时如何选择Body协议及方法？</p>
                 <span><b>1.1目标API为SOAP服务：</b><br>
                    1.1.1方法：
                    目标API方法与发布API方法只能选择POST<br>
                    1.1.2 Body协议：
                    目标API的Body协议可选择SOAP/SOAP_TEXT;发布API的Body协议可选择XML/XML_TEXT、JSON、SOAP/SOAP_TEXT。<br>
                    <b>1.2目标服务为REST服务：</b><br>
                    1.2.1 方法：
                    目标API与发布API方法可选择GET/POST/PUT/DELETE<br>
                    1.2.2 Body协议：
                   目标API的Body协议可选择XML/XML_TEXT、JSON、TEXT，发布API的Body协议可选择XML/XML_TEXT、JSON、TEXT。（由于TEXT为无结构字符串，所以TEXT不能与其他 Body协议互转） </span>
                <p class="tt">2、如何判断目标SOAP服务的 Body协议是SOAP还是SOAP_TEXT？</p>
                <span>如果目标SOAP服务报文参数值需要对XML预定义字符进行转义，则 Body协议为SOAP_TEXT，反之为SOAP。</span>
                <p class="tt">3、如何判断目标API的 Body协议是XML还是XML_TEXT？</p>
                <span>如果目标API参数需要对XML预定义字符进行转义，则 Body协议为XML_TEXT，反之为XML。</span>
                <p class="tt">4、GET方法调用时如何传递请求参数？</p>
                <span>4.1 请求参数位置：请求参数以key=value格式以”?”拼接于URL地址之后，多个参数以”&”拼接。<br>
                4.2  请求参数结构：由于GET方法请求参数已有key=value形式的结构，故value可以为任何数据结构的字符串，当value结构匹配系统支持的Body协议，则系统自动进行解析。
                </span>
                <p class="tt">5、POST/PUT/DELETE方法调用时如何传递请求参数？</p>
                <span>5.1 请求参数位置：存在于报文体。<br>
                    5.2请求参数结构：满足Body协议数据结构的字符串。</span>
                <p class="tt">6、调用失败时如何定位故障原因？</p>
                <span><b>6.1、调用失败响应处理目前是按从http返回码区分是否成功，从报文分析原因。</b><br>
                    <b>规则：</b><br>
                    1、httpCode返回500：通过http返回码说明本次调用失败<br>
                2、失败信息以json格式组织在响应报文体：包含时间戳、httpCode、httpCode对应的英文描述、异常信息<br>
                    3、异常信息：异常信息以“_”分割错误分类及错误原因。<br>
                    <b>示例：</b><br>
                    {<br>
    "timestamp": 1511317847842,<br>
    "status": 500,<br>
    "error": "Internal Server Error",<br>
    "exception": "com.netflix.zuul.exception.ZuulException",<br>
    "message": "requestParamCreateFilterError_requestBody XML/XML_TEXT is inValid"<br>
}
<p class="tt">6.2、错误分类对照表</p>
                    认证、授权失败： authError<br>
解析请求参数失败： requestParamCreateFilterError<br>
请求参数转换失败：requestPramConvertError<br>
请求参数格式化失败：requestParamToJsonError<br>
方法转换失败：requestMethodConvertError<br>
报文协议转换失败：requestProtocolConvertError<br>
路由转发失败：routeError<br>
响应格式化失败：responseToJsonError<br>
响应节点过滤失败：responseNodeRemoveError<br>
响应处理失败：responseError<br>
响应报文协议转换失败：responseProtocolConvertError<br>
响应超时：timeOut<br>
目标服务访问失败：targetServerError<br>
并发限制：concurrencyLimit

                </span>
            </div>
        </div>
    </div>
</div>
</div>

</body>
<script type="text/javascript">
    require(["biz/logSystem/optInstruction"], function (optInstruction) {
        optInstruction.init();
    });
</script>
</html>